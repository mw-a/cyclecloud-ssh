From b0053fb6d53a92e7784f23d333d0ba7434c43a69 Mon Sep 17 00:00:00 2001
From: Michael Weiser <michael.weiser@gmx.de>
Date: Thu, 22 Jan 2026 09:52:12 +0100
Subject: [PATCH] SSH parameters

---
 templates/slurm.txt | 43 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 43 insertions(+)

diff --git a/templates/slurm.txt b/templates/slurm.txt
index 4981284..8936289 100644
--- a/templates/slurm.txt
+++ b/templates/slurm.txt
@@ -64,6 +64,13 @@ Autoscale = $Autoscale
         adauth.ad_delegation_account=$ad_delegation_account
         adauth.ad_delegation_passwd=$ad_delegation_passwd
 
+        ssh.host_key.rsa.private=$ssh_host_key_rsa_private
+        ssh.host_key.rsa.public=$ssh_host_key_rsa_public
+        ssh.host_key.ecdsa.private=$ssh_host_key_ecdsa_private
+        ssh.host_key.ecdsa.public=$ssh_host_key_ecdsa_public
+        ssh.host_key.ed25519.private=$ssh_host_key_ed25519_private
+        ssh.host_key.ed25519.public=$ssh_host_key_ed25519_public
+
         # For fast spin-up after Deallocate, force an immediate re-converge on boot
         cyclecloud.converge_on_boot = true
 
@@ -583,6 +590,42 @@ Order = 10
         Description = Password for user with rights to impersonate users for cifs access.
         Conditions.Excluded := !ad_delegation
 
+        [[[parameter ssh_host_key_rsa_private]]]
+        Label = RSA private host key
+        Description = custom RSA host key (private)
+        DefaultValue = ""
+        ParameterType = Text
+
+        [[[parameter ssh_host_key_rsa_public]]]
+        Label = RSA public host key
+        Description = custom RSA host key (public)
+        DefaultValue = ""
+        ParameterType = Text
+
+        [[[parameter ssh_host_key_ecdsa_private]]]
+        Label = ECDSA private host key
+        Description = custom ECDSA host key (private)
+        DefaultValue = ""
+        ParameterType = Text
+
+        [[[parameter ssh_host_key_ecdsa_public]]]
+        Label = ECDSA public host key
+        Description = custom ECDSA host key (public)
+        DefaultValue = ""
+        ParameterType = Text
+
+        [[[parameter ssh_host_key_ed25519_private]]]
+        Label = ED25519 private host key
+        Description = custom ED25519 host key (private)
+        DefaultValue = ""
+        ParameterType = Text
+
+        [[[parameter ssh_host_key_ed25519_public]]]
+        Label = ED25519 public host key
+        Description = custom ED25519 host key (public)
+        DefaultValue = ""
+        ParameterType = Text
+
     [[parameters High Availability]]
     Order = 50
     Description = "Slurm can be setup in HA mode - where slurmctld is running on two nodes with failover. Note that checking this box will require an external NFS, so any reference to the 'builtin' NFS will be hidden."
-- 
2.52.0

